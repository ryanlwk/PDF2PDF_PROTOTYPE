# åŸç”Ÿ PDF æ˜¾ç¤ºæ›´æ–° âœ…

## ğŸ¯ æ›´æ–°å®Œæˆ

**ç‰ˆæœ¬**: v1.3.0  
**æ›´æ–°**: ä» streamlit-pdf-viewer åˆ‡æ¢åˆ°æµè§ˆå™¨åŸç”Ÿ PDF åµŒå…¥

---

## ğŸ”„ ä¸»è¦å˜æ›´

### æ›¿æ¢ PDF æ˜¾ç¤ºæ–¹å¼

**ä¹‹å‰**: ä½¿ç”¨ `streamlit-pdf-viewer` åº“  
**ç°åœ¨**: ä½¿ç”¨æµè§ˆå™¨åŸç”Ÿ `<embed>` æ ‡ç­¾

---

## âœ¨ ä¼˜åŠ¿

### 1. çœŸæ­£çš„ width="100%" âœ…
- ä½¿ç”¨ HTML `<embed>` æ ‡ç­¾
- è®¾ç½® `width="100%"` è‡ªåŠ¨å¡«æ»¡åˆ—å®½
- ä¸å— Streamlit ç»„ä»¶é™åˆ¶

### 2. æ›´è½»é‡ âœ…
- æ— éœ€å¤–éƒ¨ä¾èµ–ï¼ˆstreamlit-pdf-viewerï¼‰
- ä»…ä½¿ç”¨ Python æ ‡å‡†åº“ `base64`
- å‡å°‘ä¾èµ–å¤æ‚åº¦

### 3. æ›´åŸç”Ÿ âœ…
- ä½¿ç”¨æµè§ˆå™¨å†…ç½® PDF æŸ¥çœ‹å™¨
- æ ‡å‡† PDF åŠŸèƒ½ï¼ˆç¼©æ”¾ã€æœç´¢ã€æ‰“å°ï¼‰
- è·¨æµè§ˆå™¨å…¼å®¹æ€§å¥½

---

## ğŸ“ ä»£ç å®ç°

### æ–°å¢å‡½æ•°ï¼šdisplay_native_pdf()

```python
import base64

def display_native_pdf(file_path, height=700):
    """
    ä½¿ç”¨ç€è¦½å™¨åŸç”Ÿçš„åµŒå…¥æ¨™ç±¤é¡¯ç¤º PDFã€‚
    é€™èƒ½ä¿è­‰ PDF è‡ªå‹•ç¸®æ”¾ä»¥å¡«æ»¿æ¬„ä½å¯¬åº¦ (width="100%")ã€‚
    """
    if not os.path.exists(file_path):
        st.error(f"ğŸ“„ File not found: {file_path}")
        st.info(f"ğŸ’¡ Please ensure '{file_path}' is in the project root directory.")
        return

    with open(file_path, "rb") as f:
        base64_pdf = base64.b64encode(f.read()).decode('utf-8')

    # ä½¿ç”¨ <embed> æ¨™ç±¤ï¼Œè¨­å®š width="100%" è‡ªå‹•å¡«æ»¿å®¹å™¨
    pdf_display = f"""
        <embed
            src="data:application/pdf;base64,{base64_pdf}"
            width="100%"
            height="{height}px"
            type="application/pdf"
            style="overflow: auto; border: 1px solid #ddd; border-radius: 5px;"
        >
    """
    st.markdown(pdf_display, unsafe_allow_html=True)
```

### Step 3 ä½¿ç”¨æ–¹å¼

```python
# å·¦æ  - åŸå§‹ PDF
with col_left:
    st.markdown("###### ğŸ“„ Original Document")
    display_native_pdf(input_pdf_path, height=700)

# ä¸­æ  - ç¿»è¯‘ PDF
with col_right:
    st.markdown("###### ğŸŒ Translated Document (zh-HK)")
    display_native_pdf(output_pdf_path, height=700)
```

---

## ğŸ”§ å·¥ä½œåŸç†

### Base64 ç¼–ç æµç¨‹

```
1. è¯»å– PDF æ–‡ä»¶ä¸ºäºŒè¿›åˆ¶
   â†“
2. ä½¿ç”¨ base64 ç¼–ç 
   â†“
3. ç”Ÿæˆ data URI
   â†“
4. åµŒå…¥ HTML <embed> æ ‡ç­¾
   â†“
5. é€šè¿‡ st.markdown æ¸²æŸ“
   â†“
6. æµè§ˆå™¨åŸç”Ÿæ˜¾ç¤º PDF
```

### HTML ç»“æ„

```html
<embed
    src="data:application/pdf;base64,JVBERi0xLjQ..."
    width="100%"          â† è‡ªåŠ¨å¡«æ»¡å®¹å™¨å®½åº¦
    height="700px"        â† å›ºå®šé«˜åº¦
    type="application/pdf"
    style="overflow: auto; border: 1px solid #ddd; border-radius: 5px;"
>
```

---

## ğŸ“Š å¯¹æ¯”åˆ†æ

### streamlit-pdf-viewer vs åŸç”Ÿ embed

| ç‰¹æ€§ | streamlit-pdf-viewer | åŸç”Ÿ embed |
|------|---------------------|-----------|
| **å®½åº¦è‡ªé€‚åº”** | âš ï¸ éœ€è¦è®¾ç½®å¤§å€¼ | âœ… width="100%" |
| **å¤–éƒ¨ä¾èµ–** | âŒ éœ€è¦å®‰è£…åº“ | âœ… æ— éœ€ä¾èµ– |
| **æ–‡ä»¶å¤§å°** | âš ï¸ å¢åŠ åŒ…ä½“ç§¯ | âœ… è½»é‡ |
| **åŠŸèƒ½** | ğŸ“¦ è‡ªå®šä¹‰ç»„ä»¶ | ğŸŒ æµè§ˆå™¨åŸç”Ÿ |
| **å…¼å®¹æ€§** | âš ï¸ å–å†³äºç»„ä»¶ | âœ… æ ‡å‡† HTML |
| **ç»´æŠ¤æˆæœ¬** | âš ï¸ ä¾èµ–ç¬¬ä¸‰æ–¹ | âœ… æ ‡å‡†æŠ€æœ¯ |

---

## ğŸ¨ è§†è§‰æ•ˆæœ

### æ–°å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ Workspace: somatosensory.pdf â†’ Spanish          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“„ Original    â”‚ ğŸŒ Translated  â”‚ ğŸ’¬ AI Assistant    â”‚
â”‚ (700px é«˜)     â”‚ (700px é«˜)     â”‚ (650px é«˜)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚ ğŸ‘‹ Hello!          â”‚
â”‚ â•‘            â•‘ â”‚ â•‘            â•‘ â”‚                    â”‚
â”‚ â•‘ PDF 100%   â•‘ â”‚ â•‘ PDF 100%   â•‘ â”‚ ğŸ’¬ User: ...       â”‚
â”‚ â•‘ å¡«æ»¡åˆ—å®½    â•‘ â”‚ â•‘ å¡«æ»¡åˆ—å®½    â•‘ â”‚ ğŸ¤– AI: âœ…          â”‚
â”‚ â•‘            â•‘ â”‚ â•‘            â•‘ â”‚                    â”‚
â”‚ â•‘ <embed>    â•‘ â”‚ â•‘ <embed>    â•‘ â”‚ â†• scroll (650px)  â”‚
â”‚ â•‘ åŸç”Ÿæ¸²æŸ“    â•‘ â”‚ â•‘ åŸç”Ÿæ¸²æŸ“    â•‘ â”‚                    â”‚
â”‚ â•‘            â•‘ â”‚ â•‘            â•‘ â”‚ [Type here...]     â”‚
â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â• â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â• â”‚                    â”‚
â”‚ â†• scroll       â”‚ â†• scroll       â”‚                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  [ğŸ’¾ Export]  [ğŸ“Š Report]  [ğŸ”„ New]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ ä¾èµ–å˜æ›´

### requirements.txt

**ä¹‹å‰**:
```txt
streamlit==1.52.2
pydantic==2.12.5
streamlit-pdf-viewer  â† ç§»é™¤
```

**ä¹‹å**:
```txt
streamlit==1.52.2
pydantic==2.12.5
```

### æ–°å¢å¯¼å…¥

```python
import base64  # Python æ ‡å‡†åº“ï¼Œæ— éœ€å®‰è£…
```

---

## ğŸš€ æµ‹è¯•è¿è¡Œ

### å¯åŠ¨åº”ç”¨

```bash
cd /Users/rickylo/pdf2pdf-prototype
./run.sh
```

æˆ–

```bash
streamlit run app.py
```

### æµ‹è¯•æ¸…å•

- [ ] åº”ç”¨å¯åŠ¨æ— é”™è¯¯
- [ ] å¯¼èˆªåˆ° Step 3
- [ ] å·¦æ æ˜¾ç¤º somatosensory.pdfï¼ˆåŸç”ŸæŸ¥çœ‹å™¨ï¼‰
- [ ] ä¸­æ æ˜¾ç¤º output_tc.pdfï¼ˆåŸç”ŸæŸ¥çœ‹å™¨ï¼‰
- [ ] PDF æ˜¯å¦å¡«æ»¡ 100% åˆ—å®½
- [ ] PDF æŸ¥çœ‹å™¨åŠŸèƒ½æ­£å¸¸ï¼ˆæ»šåŠ¨ã€ç¼©æ”¾ï¼‰
- [ ] èŠå¤©åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

## ğŸŒ æµè§ˆå™¨å…¼å®¹æ€§

### æ”¯æŒçš„æµè§ˆå™¨

| æµè§ˆå™¨ | æ”¯æŒåº¦ | è¯´æ˜ |
|--------|--------|------|
| **Chrome** | âœ… å®Œç¾æ”¯æŒ | å†…ç½® PDF æŸ¥çœ‹å™¨ |
| **Edge** | âœ… å®Œç¾æ”¯æŒ | åŸºäº Chromium |
| **Firefox** | âœ… å®Œç¾æ”¯æŒ | å†…ç½® PDF.js |
| **Safari** | âœ… æ”¯æŒ | åŸç”Ÿ PDF æ”¯æŒ |
| **Opera** | âœ… æ”¯æŒ | åŸºäº Chromium |

---

## âš™ï¸ è‡ªå®šä¹‰é€‰é¡¹

### è°ƒæ•´ PDF é«˜åº¦

```python
# è¾ƒå°é«˜åº¦ï¼ˆé€‚åˆå°å±å¹•ï¼‰
display_native_pdf(input_pdf_path, height=500)

# æ ‡å‡†é«˜åº¦ï¼ˆæ¨èï¼‰
display_native_pdf(input_pdf_path, height=700)

# æ›´å¤§é«˜åº¦ï¼ˆé€‚åˆå¤§å±å¹•ï¼‰
display_native_pdf(input_pdf_path, height=900)
```

### è‡ªå®šä¹‰æ ·å¼

ä¿®æ”¹ `display_native_pdf()` å‡½æ•°ä¸­çš„ styleï¼š

```python
style="
    overflow: auto;
    border: 2px solid #667eea;      # è‡ªå®šä¹‰è¾¹æ¡†é¢œè‰²
    border-radius: 10px;            # è‡ªå®šä¹‰åœ†è§’
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);  # æ·»åŠ é˜´å½±
"
```

---

## ğŸ“ æŠ€æœ¯è¯´æ˜

### Base64 ç¼–ç 

**ä¸ºä»€ä¹ˆä½¿ç”¨ Base64ï¼Ÿ**
- å°†äºŒè¿›åˆ¶ PDF è½¬ä¸ºæ–‡æœ¬æ ¼å¼
- å¯ä»¥åµŒå…¥ HTML data URI
- æ— éœ€é¢å¤–çš„æ–‡ä»¶æœåŠ¡å™¨

**æ€§èƒ½è€ƒè™‘**:
- ç¼–ç ä¼šå¢åŠ çº¦ 33% æ–‡ä»¶å¤§å°
- é€‚åˆä¸­å°å‹ PDFï¼ˆ< 10MBï¼‰
- å¤§å‹ PDF å¯èƒ½éœ€è¦å…¶ä»–æ–¹æ¡ˆ

### HTML Embed æ ‡ç­¾

**ä¼˜åŠ¿**:
- W3C æ ‡å‡†
- æµè§ˆå™¨åŸç”Ÿæ”¯æŒ
- è‡ªåŠ¨å¤„ç† PDF æ¸²æŸ“

**å±æ€§è¯´æ˜**:
- `src`: PDF æ•°æ®æºï¼ˆBase64 data URIï¼‰
- `width="100%"`: è‡ªåŠ¨å¡«æ»¡å®¹å™¨å®½åº¦
- `height`: å›ºå®šé«˜åº¦ï¼ˆåƒç´ ï¼‰
- `type="application/pdf"`: MIME ç±»å‹

---

## ğŸ” å¸¸è§é—®é¢˜

### Q: PDF ä¸æ˜¾ç¤ºï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š`ls -la somatosensory.pdf`
2. æµè§ˆå™¨æ˜¯å¦æ”¯æŒ PDFï¼šæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
3. æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ï¼šæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·

### Q: PDF æ˜¾ç¤ºå¾ˆæ…¢ï¼Ÿ

**A**: å¯èƒ½åŸå› ï¼š
1. PDF æ–‡ä»¶è¾ƒå¤§ï¼ˆBase64 ç¼–ç å¢åŠ ä¼ è¾“é‡ï¼‰
2. æµè§ˆå™¨é¦–æ¬¡åŠ è½½ PDF å¼•æ“
3. è§£å†³æ–¹æ¡ˆï¼šè€ƒè™‘ PDF å‹ç¼©æˆ–åˆ†é¡µåŠ è½½

### Q: æƒ³æ¢å¤ streamlit-pdf-viewerï¼Ÿ

**A**: ä¿®æ”¹æ­¥éª¤ï¼š
1. é‡æ–°å®‰è£…ï¼š`pip install streamlit-pdf-viewer`
2. æ¢å¤å¯¼å…¥ï¼š`from streamlit_pdf_viewer import pdf_viewer`
3. æ›¿æ¢è°ƒç”¨ï¼š`pdf_viewer(input=pdf_bytes, width=1200, height=700)`

---

## ğŸ‰ æ›´æ–°æ€»ç»“

### v1.3.0 æ”¹è¿›æˆæœ

- âœ… **çœŸæ­£çš„ width="100%"** - å®Œç¾å¡«æ»¡åˆ—å®½
- âœ… **ç§»é™¤å¤–éƒ¨ä¾èµ–** - æ›´è½»é‡çš„é¡¹ç›®
- âœ… **æµè§ˆå™¨åŸç”Ÿæ”¯æŒ** - æ›´å¥½çš„å…¼å®¹æ€§
- âœ… **ç®€åŒ–ä»£ç ** - æ›´æ˜“ç»´æŠ¤
- âœ… **æ ‡å‡†åŒ–æŠ€æœ¯** - ä½¿ç”¨ HTML æ ‡å‡†

### æ–‡ä»¶å˜æ›´

| æ–‡ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| **app.py** | âœï¸ å·²æ›´æ–° | æ·»åŠ  display_native_pdf() |
| **requirements.txt** | âœï¸ å·²æ›´æ–° | ç§»é™¤ streamlit-pdf-viewer |
| **åŸç”ŸPDFæ˜¾ç¤ºæ›´æ–°.md** | ğŸ†• æ–°å¢ | æœ¬æ–‡æ¡£ |

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **PDFå°ºå¯¸ä¼˜åŒ–è¯´æ˜.md** - å°ºå¯¸è°ƒæ•´è¯´æ˜
- **REAL_PDF_VIEWER_INTEGRATION.md** - PDF æŸ¥çœ‹å™¨é›†æˆå†å²
- **COMPACT_SUMMARY.md** - ç´§å‡‘å¸ƒå±€ä¼˜åŒ–

---

**æ›´æ–°çŠ¶æ€**: âœ… **å®Œæˆ**  
**æµ‹è¯•çŠ¶æ€**: â³ **å¾…æµ‹è¯•**  
**å‡†å¤‡çŠ¶æ€**: ğŸš€ **å¯æ¼”ç¤º**  

**ç«‹å³è¿è¡Œ `./run.sh` æŸ¥çœ‹åŸç”Ÿ PDF æ˜¾ç¤ºæ•ˆæœï¼** ğŸŒâœ¨ğŸŠ

