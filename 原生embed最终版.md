# åŸç”Ÿ embed æœ€ç»ˆç‰ˆ âœ…

## ğŸ¯ æœ€ç»ˆæ–¹æ¡ˆ

**ç‰ˆæœ¬**: v1.5.0 (Final)  
**æ–¹æ¡ˆ**: æµè§ˆå™¨åŸç”Ÿ `<embed>` æ ‡ç­¾ + Base64 ç¼–ç   
**çŠ¶æ€**: âœ… æœ€ç»ˆç¨³å®šç‰ˆ

---

## ğŸ”„ æ–¹æ¡ˆæ¼”è¿›æ€»ç»“

### å®Œæ•´å†ç¨‹

| ç‰ˆæœ¬ | æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | ç»“æœ |
|------|------|------|------|------|
| v1.2 | pdf_viewer (width=700) | çœŸå® PDF | ç•™ç™½å¤š | âŒ å¼ƒç”¨ |
| v1.3 | iframe + Base64 | width="100%" | ç™½å±é—®é¢˜ | âŒ å¼ƒç”¨ |
| v1.4 | pdf_viewer (width=2000) | å¡«æ»¡å®¹å™¨ | éœ€è¦å¤–éƒ¨åº“ | âš ï¸ å¤æ‚ |
| **v1.5** | **embed + Base64** | **width="100%"** | **æ— ** | âœ… **æœ€ç»ˆ** |

---

## âœ¨ æœ€ç»ˆæ–¹æ¡ˆä¼˜åŠ¿

### 1. çœŸæ­£çš„ width="100%" âœ…

```html
<embed
    src="data:application/pdf;base64,..."
    width="100%"           â† çœŸæ­£çš„ç™¾åˆ†æ¯”
    height="700px"
    type="application/pdf"
>
```

**æ•ˆæœ**: PDF è‡ªåŠ¨å¡«æ»¡å®¹å™¨å®½åº¦ï¼Œæ— è®ºå±å¹•å¤§å°ï¼

### 2. æ— å¤–éƒ¨ä¾èµ– âœ…

**ç§»é™¤**: `streamlit-pdf-viewer`  
**ä»…éœ€**: Python æ ‡å‡†åº“ `base64`

**requirements.txt**:
```txt
streamlit==1.52.2
pydantic==2.12.5
# æ— å…¶ä»–ä¾èµ–ï¼
```

### 3. æµè§ˆå™¨åŸç”Ÿæ¸²æŸ“ âœ…

- ä½¿ç”¨ Chrome/Safari å†…ç½® PDF å¼•æ“
- è‡ªåŠ¨æ”¯æŒç¼©æ”¾å·¥å…·æ 
- å­—ä½“æ¸…æ™°ï¼Œæ€§èƒ½ä¼˜ç§€
- è·¨æµè§ˆå™¨å…¼å®¹

### 4. ä»£ç ç®€æ´ âœ…

**æ€»è¡Œæ•°**: 228 è¡Œ  
**æ ¸å¿ƒå‡½æ•°**: `display_native_pdf()` ä»… 20 è¡Œ  
**æ˜“ç»´æŠ¤**: æ— å¤æ‚ä¾èµ–

---

## ğŸ“ æ ¸å¿ƒä»£ç 

### display_native_pdf() å‡½æ•°

```python
def display_native_pdf(file_path, height=700):
    """
    ä½¿ç”¨ <embed> æ¨™ç±¤é¡¯ç¤º PDFã€‚
    é€™æœƒèª¿ç”¨ç€è¦½å™¨ (Chrome/Safari) çš„åŸç”Ÿ PDF é–±è®€å™¨ã€‚
    å„ªé»ï¼šè‡ªå‹•é©æ‡‰å¯¬åº¦ (Fit Width)ï¼Œæ”¯æ´ç¸®æ”¾å·¥å…·åˆ—ï¼Œå­—é«”æ¸…æ™°ã€‚
    """
    if not os.path.exists(file_path):
        st.error(f"ğŸ“„ File not found: {file_path}")
        return

    with open(file_path, "rb") as f:
        base64_pdf = base64.b64encode(f.read()).decode('utf-8')

    # ä½¿ç”¨ embed æ¨™ç±¤ï¼Œè¨­å®š width="100%" è®“å®ƒè‡ªå‹•å¡«æ»¿æ¬„ä½
    pdf_display = f"""
        <embed
            src="data:application/pdf;base64,{base64_pdf}"
            width="100%"
            height="{height}px"
            type="application/pdf"
            style="overflow: auto; border: 1px solid #ddd; border-radius: 5px;"
        >
    """
    st.markdown(pdf_display, unsafe_allow_html=True)
```

### Step 3 ä½¿ç”¨æ–¹å¼

```python
def step3_workspace():
    # ... åˆå§‹åŒ– ...
    
    col_L, col_R, col_Chat = st.columns([4, 4, 2.5])
    
    height_px = 700
    
    # å·¦æ ï¼šåŸå§‹ PDF
    with col_L:
        st.markdown("###### ğŸ“„ Original")
        display_native_pdf(input_path, height=height_px)

    # ä¸­æ ï¼šç¿»è¯‘ PDF
    with col_R:
        st.markdown("###### ğŸŒ Translated (zh-HK)")
        display_native_pdf(output_path, height=height_px)

    # å³æ ï¼šèŠå¤©
    with col_Chat:
        st.markdown("###### ğŸ¤– Assistant")
        # ... èŠå¤©é€»è¾‘ ...
```

---

## ğŸ¨ æœ€ç»ˆå¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“„ PDF2PDF                                          â”‚
â”‚  Upload â†’ Configure â†’ Workspace                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“„ Original      â”‚ ğŸŒ Translated    â”‚ ğŸ¤– Assistant  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚ Chat messages â”‚
â”‚ â•‘              â•‘ â”‚ â•‘              â•‘ â”‚               â”‚
â”‚ â•‘ <embed>      â•‘ â”‚ â•‘ <embed>      â•‘ â”‚ User: ...     â”‚
â”‚ â•‘ width="100%" â•‘ â”‚ â•‘ width="100%" â•‘ â”‚ AI: âœ…        â”‚
â”‚ â•‘ åŸç”Ÿæ¸²æŸ“      â•‘ â”‚ â•‘ åŸç”Ÿæ¸²æŸ“      â•‘ â”‚               â”‚
â”‚ â•‘ å®Œç¾å¡«æ»¡      â•‘ â”‚ â•‘ å®Œç¾å¡«æ»¡      â•‘ â”‚ [Type here...]â”‚
â”‚ â•‘              â•‘ â”‚ â•‘              â•‘ â”‚               â”‚
â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚               â”‚
â”‚ (700px)          â”‚ (700px)          â”‚ (640px)       â”‚
â”‚ 4 units          â”‚ 4 units          â”‚ 2.5 units     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  [ğŸ’¾ Export]  [ğŸ“Š Report]  [ğŸ”„ Reset]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ç«‹å³è¿è¡Œ

### å¯åŠ¨åº”ç”¨

```bash
cd /Users/rickylo/pdf2pdf-prototype
streamlit run app.py
```

æˆ–ä½¿ç”¨å¿«é€Ÿå¯åŠ¨è„šæœ¬ï¼š

```bash
./run.sh
```

### å¿«é€Ÿæµ‹è¯•æµç¨‹

1. **Step 1**: ç‚¹å‡» "ğŸ‘‰ Use Demo File (somatosensory.pdf)"
2. **Step 2**: é€‰æ‹©é…ç½®ï¼Œç‚¹å‡» "Start Processing ğŸš€"
3. **Step 3**: æŸ¥çœ‹åŒ PDF è§†å›¾

### æµ‹è¯•é‡ç‚¹

- [ ] PDF æ˜¯å¦**å®Œå…¨å¡«æ»¡**å®¹å™¨ï¼ˆwidth="100%"ï¼‰
- [ ] æ˜¯å¦**æ— ç™½å±**é—®é¢˜
- [ ] æµè§ˆå™¨åŸç”Ÿå·¥å…·æ æ˜¯å¦å¯ç”¨ï¼ˆç¼©æ”¾ã€æ‰“å°ç­‰ï¼‰
- [ ] PDF æ¸²æŸ“æ˜¯å¦**æ¸…æ™°æµç•…**
- [ ] èŠå¤©åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

## ğŸ“Š æŠ€æœ¯å¯¹æ¯”

### embed vs iframe vs pdf_viewer

| ç‰¹æ€§ | embed | iframe | pdf_viewer |
|------|-------|--------|-----------|
| **width="100%"** | âœ… åŸç”Ÿæ”¯æŒ | âœ… åŸç”Ÿæ”¯æŒ | âŒ éœ€è¦æŠ€å·§ |
| **ç™½å±é—®é¢˜** | âœ… æ—  | âš ï¸ æœ‰ | âœ… æ—  |
| **å¤–éƒ¨ä¾èµ–** | âœ… æ—  | âœ… æ—  | âŒ éœ€è¦åº“ |
| **æµè§ˆå™¨å…¼å®¹** | âœ… ä¼˜ç§€ | âœ… ä¼˜ç§€ | âš ï¸ ä¸€èˆ¬ |
| **å·¥å…·æ ** | âœ… åŸç”Ÿ | âš ï¸ æœ‰é™ | âœ… å®Œæ•´ |
| **æ¨èåº¦** | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ |

**æœ€ç»ˆé€‰æ‹©**: `<embed>` âœ…

---

## ğŸŒ æµè§ˆå™¨å…¼å®¹æ€§

### æ”¯æŒæƒ…å†µ

| æµè§ˆå™¨ | ç‰ˆæœ¬ | embed æ”¯æŒ | è¯´æ˜ |
|--------|------|-----------|------|
| **Chrome** | æ‰€æœ‰ | âœ… å®Œç¾ | å†…ç½® PDF æŸ¥çœ‹å™¨ |
| **Edge** | æ‰€æœ‰ | âœ… å®Œç¾ | Chromium å†…æ ¸ |
| **Firefox** | æ‰€æœ‰ | âœ… å®Œç¾ | PDF.js å¼•æ“ |
| **Safari** | æ‰€æœ‰ | âœ… å®Œç¾ | WebKit PDF |
| **Opera** | æ‰€æœ‰ | âœ… å®Œç¾ | Chromium å†…æ ¸ |

---

## ğŸ’¡ ä¸ºä»€ä¹ˆè¿™æ˜¯æœ€ç»ˆæ–¹æ¡ˆï¼Ÿ

### 1. ç®€å•å¯é  âœ…

- æ— å¤–éƒ¨ä¾èµ–
- ä»£ç ç®€æ´ï¼ˆ228 è¡Œï¼‰
- æ˜“äºç»´æŠ¤

### 2. æ€§èƒ½ä¼˜ç§€ âœ…

- æµè§ˆå™¨åŸç”Ÿæ¸²æŸ“
- æ— éœ€ JavaScript åº“
- åŠ è½½é€Ÿåº¦å¿«

### 3. ç”¨æˆ·ä½“éªŒå¥½ âœ…

- width="100%" å®Œç¾å¡«æ»¡
- åŸç”Ÿç¼©æ”¾å·¥å…·æ 
- å­—ä½“æ¸…æ™°

### 4. è·¨å¹³å°å…¼å®¹ âœ…

- æ‰€æœ‰ç°ä»£æµè§ˆå™¨
- Windows/Mac/Linux
- æ¡Œé¢/å¹³æ¿

---

## ğŸ“¦ æ–‡ä»¶å˜æ›´

| æ–‡ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| **app.py** | âœï¸ å®Œå…¨é‡å†™ | 228 è¡Œï¼Œä½¿ç”¨ embed |
| **requirements.txt** | âœï¸ å·²æ›´æ–° | ç§»é™¤ streamlit-pdf-viewer |
| **åŸç”Ÿembedæœ€ç»ˆç‰ˆ.md** | ğŸ†• æ–°å¢ | æœ¬æ–‡æ¡£ |

---

## ğŸ‰ ç‰ˆæœ¬å†å²æ€»ç»“

### v1.0 â†’ v1.5 æ¼”è¿›

```
v1.0: æ–‡æœ¬å—
  â†“
v1.1: å›¾ç‰‡å ä½ç¬¦
  â†“
v1.2: pdf_viewer (width=700) âŒ ç•™ç™½å¤š
  â†“
v1.3: iframe + Base64 âŒ ç™½å±
  â†“
v1.4: pdf_viewer (width=2000) âš ï¸ å¤æ‚
  â†“
v1.5: embed + Base64 âœ… å®Œç¾ï¼
```

---

## âœ… æœ€ç»ˆæ–¹æ¡ˆç‰¹ç‚¹

### æ ¸å¿ƒä¼˜åŠ¿

- âœ… **width="100%"** - çœŸæ­£çš„ç™¾åˆ†æ¯”æ”¯æŒ
- âœ… **æ— å¤–éƒ¨ä¾èµ–** - ä»…éœ€ Python æ ‡å‡†åº“
- âœ… **æµè§ˆå™¨åŸç”Ÿ** - ä½¿ç”¨å†…ç½® PDF å¼•æ“
- âœ… **ä»£ç ç®€æ´** - 228 è¡Œï¼Œæ˜“ç»´æŠ¤
- âœ… **æ€§èƒ½ä¼˜ç§€** - å¿«é€ŸåŠ è½½ï¼Œæµç•…æ¸²æŸ“
- âœ… **è·¨æµè§ˆå™¨** - æ‰€æœ‰ç°ä»£æµè§ˆå™¨æ”¯æŒ

### é€‚ç”¨åœºæ™¯

- âœ… äº§å“æ¼”ç¤º
- âœ… å®¢æˆ·å±•ç¤º
- âœ… å¼€å‘æµ‹è¯•
- âœ… ç”Ÿäº§éƒ¨ç½²
- âœ… æ‰€æœ‰åœºæ™¯ï¼

### æ¨èæŒ‡æ•°

**â­â­â­â­â­ æœ€ç»ˆæ¨èæ–¹æ¡ˆï¼**

---

## ğŸ”§ è‡ªå®šä¹‰é€‰é¡¹

### è°ƒæ•´ PDF é«˜åº¦

```python
# å°å±å¹•
display_native_pdf(input_path, height=500)

# æ ‡å‡†ï¼ˆæ¨èï¼‰
display_native_pdf(input_path, height=700)

# å¤§å±å¹•
display_native_pdf(input_path, height=900)
```

### è‡ªå®šä¹‰æ ·å¼

ä¿®æ”¹ `display_native_pdf()` ä¸­çš„ style:

```python
style="
    overflow: auto;
    border: 2px solid #667eea;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
"
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

### å†å²æ–‡æ¡£ï¼ˆå‚è€ƒï¼‰

- **width2000æŠ€å·§æ›´æ–°.md** - v1.4 pdf_viewer æ–¹æ¡ˆ
- **iframeä¿®æ­£è¯´æ˜.md** - v1.3 iframe æ–¹æ¡ˆ
- **åŸç”ŸPDFæ˜¾ç¤ºæ›´æ–°.md** - v1.3 åˆå§‹ iframe ç‰ˆæœ¬

### å½“å‰æ–‡æ¡£

- **åŸç”Ÿembedæœ€ç»ˆç‰ˆ.md** - æœ¬æ–‡æ¡£ï¼ˆv1.5 æœ€ç»ˆæ–¹æ¡ˆï¼‰

---

## ğŸ¯ æ€»ç»“

### v1.5.0 - æœ€ç»ˆç¨³å®šç‰ˆ

**æ–¹æ¡ˆ**: æµè§ˆå™¨åŸç”Ÿ `<embed>` + Base64  
**ä»£ç **: 228 è¡Œï¼Œç®€æ´é«˜æ•ˆ  
**ä¾èµ–**: ä»… Streamlit + Pydantic  
**æ€§èƒ½**: ä¼˜ç§€  
**å…¼å®¹æ€§**: å®Œç¾  
**æ¨èåº¦**: â­â­â­â­â­  

**è¿™æ˜¯æœ€ç»ˆæ–¹æ¡ˆï¼Œæ— éœ€å†è¿­ä»£ï¼** âœ…

---

**æ›´æ–°çŠ¶æ€**: âœ… **æœ€ç»ˆå®Œæˆ**  
**ç¨³å®šæ€§**: âœ… **ç”Ÿäº§çº§**  
**æ¨èåº¦**: ğŸš€ **å¼ºçƒˆæ¨è**  

**ç«‹å³è¿è¡Œ `streamlit run app.py` ä½“éªŒæœ€ç»ˆç‰ˆæœ¬ï¼** ğŸŠâœ¨ğŸš€

